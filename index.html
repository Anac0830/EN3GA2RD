<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EN3GA2 - Conectando Talento y Oportunidades</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f8f9fa; /* Un gris muy claro */
      color: #333;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }

    header {
      background-color: #003366; /* Azul Corporativo */
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    header h1 {
      margin: 0;
      font-size: 2.5rem;
      font-weight: 700;
    }

    header h1 span {
      color: #FFA500; /* Naranja Corporativo */
    }

    header p {
      font-size: 1.1rem;
      margin-top: 0.5rem;
      opacity: 0.9;
    }

    .main-container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1rem; /* Padding para móviles */
    }
    
    .intro-section, .form-section {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      margin-bottom: 2rem;
    }

    .intro-section h2 {
      color: #003366;
      margin-top: 0;
      margin-bottom: 1rem;
      font-size: 1.8rem;
    }

    .intro-section p {
      margin-bottom: 0.5rem;
    }

    .form-section h2 {
      color: #003366;
      text-align: center;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
    }

    form label {
      display: block;
      margin-top: 1.2rem;
      margin-bottom: 0.4rem;
      font-weight: 500;
      color: #555;
    }

    form input[type="text"],
    form input[type="email"],
    form input[type="tel"],
    form select,
    form textarea {
      width: 100%;
      padding: 0.75rem;
      margin-top: 0.2rem;
      border-radius: 8px;
      border: 1px solid #ced4da;
      background-color: #fdfdfd;
      box-sizing: border-box;
      transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

    form input[type="text"]:focus,
    form input[type="email"]:focus,
    form input[type="tel"]:focus,
    form select:focus,
    form textarea:focus {
      border-color: #FFA500;
      box-shadow: 0 0 0 0.2rem rgba(255, 165, 0, 0.25);
      outline: none;
    }

    form button {
      margin-top: 2rem;
      padding: 0.9rem 1.8rem;
      background-color: #FFA500;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 500;
      transition: background-color 0.2s ease-in-out;
      width: 100%; /* Botón más prominente */
    }

    form button:hover {
      background-color: #e69500; /* Naranja más oscuro */
    }

    .hidden {
      display: none;
    }

    .form-group {
      margin-bottom: 1rem;
    }
    
    .user-type-options {
        display: flex;
        justify-content: space-around;
        margin-bottom: 1.5rem;
    }

    .user-type-options label {
        cursor: pointer;
        padding: 0.75rem 1rem;
        border: 1px solid #ced4da;
        border-radius: 8px;
        transition: background-color 0.2s, border-color 0.2s;
        margin: 0; /* Reset margin for labels inside */
    }
    .user-type-options input[type="radio"] {
        display: none; /* Hide actual radio button */
    }

    .user-type-options input[type="radio"]:checked + label {
        background-color: #003366;
        color: white;
        border-color: #003366;
    }


    .message-box {
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 8px;
      text-align: center;
    }
    .success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
  </style>
</head>
<body>

  <header>
    <h1><span>⚡</span>EN3GA2</h1>
    <p>Conectando talento independiente con empresas innovadoras en RD.</p>
  </header>

  <main class="main-container">
    <section class="intro-section">
      <h2>¿Qué es EN3GA2?</h2>
      <p><strong>EN3GA2</strong> Marketplace digital que une a trabajadores independientes con empresas o personas que necesiten empleados por proyectos o por hora. </p>
      <p><strong>Para Empresas:</strong>  Contrata talento independiente, calificado y sin costos fijos, desde un repartidor ágil hasta un contable experto. Optimicen sus operaciones y encuentren el talento por proyecto o por horas. 
Restaurantes: Ahorra hasta un 10% con nuestro delivery rápido y confiable.</p>
      <p><strong>Para Gig Workers / Trabajadores Independientes:</strong> ¡Convierte tus habilidades en ingresos reales, desde donde quieras!

</p>
    </section>

    <section class="form-section">
      <h2>Únete a la Revolución del Trabajo Independiente</h2>
      <form id="registroForm" method="POST">
        
        <div class="form-group">
          <label>Soy:</label>
          <div class="user-type-options">
            <span>
                <input type="radio" id="tipo_empresa" name="tipo_usuario" value="Empresa" required>
                <label for="tipo_empresa">Una Empresa</label>
            </span>
            <span>
                <input type="radio" id="tipo_gig_worker" name="tipo_usuario" value="Gig Worker">
                <label for="tipo_gig_worker">Un Gig Worker</label>
            </span>
          </div>
        </div>

        <div id="campos_empresa" class="hidden">
          <div class="form-group">
            <label for="nombre_empresa">Nombre de la Empresa</label>
            <input type="text" id="nombre_empresa" name="nombre_empresa">
          </div>
          <div class="form-group">
            <label for="representante_empresa">Representante</label>
            <input type="text" id="representante_empresa" name="representante_empresa">
          </div>
          <div class="form-group">
            <label for="email_empresa">Correo de la Empresa</label>
            <input type="email" id="email_empresa" name="email_empresa">
          </div>
          <div class="form-group">
            <label for="telefono_empresa">Teléfono de la Empresa</label>
            <input type="tel" id="telefono_empresa" name="telefono_empresa">
          </div>
          <div class="form-group">
            <label for="servicio_deseado">Servicio que desea</label>
            <select id="servicio_deseado" name="servicio_deseado">
              <option value="">Seleccione un servicio...</option>
              <option value="Buscar empleados por hora">Buscar empleados por hora</option>
              <option value="Repartidores">Repartidores</option>
              <option value="Contabilidad/Finanzas">Contabilidad/Finanzas</option>
              <option value="Marketing Digital">Marketing Digital</option>
              <option value="Soporte Administrativo">Soporte Administrativo</option>
              <option value="Desarrollo Web/App">Desarrollo Web/App</option>
              <option value="Otro">Otro (especificar)</option>
            </select>
          </div>
          <div class="form-group hidden" id="servicio_otro_wrapper">
            <label for="servicio_otro_texto">Especifique el servicio</label>
            <input type="text" id="servicio_otro_texto" name="servicio_otro_texto">
          </div>
        </div>

        <div id="campos_gig_worker" class="hidden">
          <div class="form-group">
            <label for="nombre_completo_gw">Nombre completo</label>
            <input type="text" id="nombre_completo_gw" name="nombre_completo_gw">
          </div>
           <div class="form-group">
            <label for="email_gw">Correo</label>
            <input type="email" id="email_gw" name="email_gw">
          </div>
          <div class="form-group">
            <label for="telefono_gw">Teléfono</label>
            <input type="tel" id="telefono_gw" name="telefono_gw">
          </div>
          <div class="form-group">
            <label for="tipo_trabajo_gw">Tipo de trabajo que buscas</label>
            <select id="tipo_trabajo_gw" name="tipo_trabajo_gw">
              <option value="">Seleccione una opción...</option>
              <option value="Repartidor">Repartidor</option>
              <option value="Diseñador Gráfico">Diseñador Gráfico</option>
              <option value="Secretaria Virtual">Secretaria Virtual</option>
              <option value="Redactor de Contenidos">Redactor de Contenidos</option>
              <option value="Traductor">Traductor</option>
              <option value="Programador Web">Programador Web</option>
              <option value="Consultor SEO/SEM">Consultor SEO/SEM</option>
              <option value="Community Manager">Community Manager</option>
              <option value="Asistente Contable">Asistente Contable</option>
              <option value="Profesor/Tutor Online">Profesor/Tutor Online</option>
              <option value="Otro">Otro (especificar)</option>
            </select>
          </div>
          <div class="form-group hidden" id="tipo_trabajo_otro_wrapper">
            <label for="tipo_trabajo_otro_texto">Especifique el tipo de trabajo</label>
            <input type="text" id="tipo_trabajo_otro_texto" name="tipo_trabajo_otro_texto">
          </div>
          <div class="form-group hidden" id="tipo_vehiculo_wrapper">
            <label for="tipo_vehiculo_gw">Tipo de vehículo (si aplica)</label>
            <select id="tipo_vehiculo_gw" name="tipo_vehiculo_gw">
              <option value="">Seleccione su vehículo...</option>
              <option value="Motocicleta">Motocicleta</option>
              <option value="Automóvil">Automóvil</option>
              <option value="Bicicleta">Bicicleta</option>
              <option value="Patineta Eléctrica">Patineta Eléctrica</option>
              <option value="A pie">A pie (para distancias cortas)</option>
              <option value="No aplica">No aplica / Otro</option>
            </select>
          </div>
        </div>
        
        <button type="submit" id="submitButton">Enviar Registro</button>
        <div id="respuesta" class="message-box hidden"></div>
      </form>
    </section>
  </main>

  <footer>
    <p style="text-align:center; padding: 1rem; background-color: #e9ecef; color: #555; font-size:0.9rem;">
      &copy; <span id="currentYear"></span> EN3GA2 - Todos los derechos reservados.
    </p>
  </footer>

  <script>
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    const form = document.getElementById('registroForm');
    const respuesta = document.getElementById('respuesta');
    const submitButton = document.getElementById('submitButton');
    const urlScriptGoogle = "https://script.google.com/macros/s/AKfycbyc9cGz96GCQ_cDMSxjKxkOH0rv3_xS39TRFdoW8CdGw7BkAeSNSRGbrUfPiW-am1R8Xg/exec"; // TU URL DE SCRIPT

    const tipoUsuarioRadios = document.querySelectorAll('input[name="tipo_usuario"]');
    const camposEmpresa = document.getElementById('campos_empresa');
    const camposGigWorker = document.getElementById('campos_gig_worker');

    // Campos específicos Gig Worker
    const tipoTrabajoGwSelect = document.getElementById('tipo_trabajo_gw');
    const tipoTrabajoOtroWrapper = document.getElementById('tipo_trabajo_otro_wrapper');
    const tipoVehiculoWrapper = document.getElementById('tipo_vehiculo_wrapper');

    // Campos específicos Empresa
    const servicioDeseadoSelect = document.getElementById('servicio_deseado');
    const servicioOtroWrapper = document.getElementById('servicio_otro_wrapper');

    // Inputs que deben ser requeridos condicionalmente
    const inputsEmpresa = {
        nombre: document.getElementById('nombre_empresa'),
        representante: document.getElementById('representante_empresa'),
        email: document.getElementById('email_empresa'),
        telefono: document.getElementById('telefono_empresa'),
        servicio: document.getElementById('servicio_deseado')
    };
    const inputsGigWorker = {
        nombre: document.getElementById('nombre_completo_gw'),
        email: document.getElementById('email_gw'),
        telefono: document.getElementById('telefono_gw'),
        tipoTrabajo: document.getElementById('tipo_trabajo_gw')
    };


    function toggleRequired(elements,isRequired) {
        for (const key in elements) {
            if (elements.hasOwnProperty(key)) {
                elements[key].required = isRequired;
            }
        }
    }
    
    tipoUsuarioRadios.forEach(radio => {
      radio.addEventListener('change', function() {
        if (this.value === 'Empresa') {
          camposEmpresa.classList.remove('hidden');
          camposGigWorker.classList.add('hidden');
          toggleRequired(inputsEmpresa, true);
          toggleRequired(inputsGigWorker, false);
        } else if (this.value === 'Gig Worker') {
          camposEmpresa.classList.add('hidden');
          camposGigWorker.classList.remove('hidden');
          toggleRequired(inputsEmpresa, false);
          toggleRequired(inputsGigWorker, true);
        }
        // Resetear campos dependientes si se cambia de tipo de usuario
        tipoTrabajoOtroWrapper.classList.add('hidden');
        document.getElementById('tipo_trabajo_otro_texto').required = false;
        tipoVehiculoWrapper.classList.add('hidden');
        document.getElementById('tipo_vehiculo_gw').required = false;
        servicioOtroWrapper.classList.add('hidden');
        document.getElementById('servicio_otro_texto').required = false;
      });
    });

    tipoTrabajoGwSelect.addEventListener('change', function() {
      if (this.value === 'Otro') {
        tipoTrabajoOtroWrapper.classList.remove('hidden');
        document.getElementById('tipo_trabajo_otro_texto').required = true;
      } else {
        tipoTrabajoOtroWrapper.classList.add('hidden');
        document.getElementById('tipo_trabajo_otro_texto').required = false;
      }

      if (this.value === 'Repartidor') {
        tipoVehiculoWrapper.classList.remove('hidden');
        document.getElementById('tipo_vehiculo_gw').required = true;
      } else {
        tipoVehiculoWrapper.classList.add('hidden');
        document.getElementById('tipo_vehiculo_gw').required = false;
      }
    });
    
    servicioDeseadoSelect.addEventListener('change', function() {
        if (this.value === 'Otro') {
            servicioOtroWrapper.classList.remove('hidden');
            document.getElementById('servicio_otro_texto').required = true;
        } else {
            servicioOtroWrapper.classList.add('hidden');
            document.getElementById('servicio_otro_texto').required = false;
        }
    });


    form.addEventListener('submit', function (e) {
      e.preventDefault();
      submitButton.disabled = true;
      submitButton.textContent = 'Enviando...';
      respuesta.classList.add('hidden');
      respuesta.textContent = '';

      const data = new FormData(form);
      // Si un campo condicional "otro" está oculto, su valor no debe ser el principal
      if (tipoTrabajoGwSelect.value !== 'Otro') data.delete('tipo_trabajo_otro_texto');
      if (servicioDeseadoSelect.value !== 'Otro') data.delete('servicio_otro_texto');
      if (tipoTrabajoGwSelect.value !== 'Repartidor') data.delete('tipo_vehiculo_gw');


      fetch(urlScriptGoogle, {
        method: 'POST',
        body: data,
      })
      .then(res => res.json()) // Esperamos una respuesta JSON del script
      .then(response => {
        if (response.result === "success") {
          form.reset(); // Limpiar el formulario
          // Ocultar campos condicionales y resetear radios
          camposEmpresa.classList.add('hidden');
          camposGigWorker.classList.add('hidden');
          tipoUsuarioRadios.forEach(radio => radio.checked = false);
          toggleRequired(inputsEmpresa, false); // Quitar required
          toggleRequired(inputsGigWorker, false); // Quitar required

          respuesta.textContent = '¡Gracias por registrarte! Te contactaremos pronto. 💙🧡';
          respuesta.className = 'message-box success'; // Quita hidden y añade success
          respuesta.classList.remove('hidden');
        } else {
          throw new Error(response.message || "Error desconocido del servidor.");
        }
      })
      .catch(error => {
        respuesta.textContent = `Error al enviar: ${error.message}. Intenta nuevamente.`;
        respuesta.className = 'message-box error';
        respuesta.classList.remove('hidden');
      })
      .finally(() => {
          submitButton.disabled = false;
          submitButton.textContent = 'Enviar Registro';
      });
    });
  </script>

</body>
</html>


